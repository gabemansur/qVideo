<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>qVideo - Audio Video capture in Qualtrics</title>
  <meta name="description" content="Audio Video capture in Qualtrics">
  <meta name="author" content="Gabe Mansur">
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"
          integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
          crossorigin="anonymous"></script>

  <script src="https://cdn.WebRTC-Experiment.com/RecordRTC.js"></script>

  <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.js"></script>
  <![endif]-->
</head>

<body>

  <div id="error"></div>
  <br>
  <button id="record">Record</button>
  <button id="stop">Stop</button>

<script>

const u_id = 'AUD1234'; // This will be pulled from Qualrtics (or possibly some other source)

$(document).ready(function(){

  qVideo = new QVideo(null, u_id, null);
  qVideo.setConstraints({audio: true, video: false});

  if(!qVideo.hasGetUserMedia()) {
    $("#error").html('VIDEO RECORDING IS NOT SUPPORTED');
  }

  $("#record").on('click', function(event) {
    qVideo.startRecording();
  });

  $("#stop").on('click', function(event) {
    qVideo.stopRecording();
  });

});


</script>

  <script src="js/QVideo.js"></script>
</body>
</html>
